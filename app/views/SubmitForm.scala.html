@*
 * Copyright 2021 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import config.AppConfig
@import models.auth.User
@import templates.formatters.dates.DisplayDate
@import templates.formatters.dates.DisplayDateRange
@import uk.gov.hmrc.govukfrontend.views.html.components._

@this(mainTemplate: MainTemplate,
      displayDateRange: DisplayDateRange,
      displayDate: DisplayDate,
      formAction: FormWithCSRF,
      govukErrorSummary: GovukErrorSummary,
      govukInput : GovukInput,
      govukBackLink: GovukBackLink,
      govukButton: GovukButton)

@(periodKey: String,
  clientName: Option[String],
  flatRateScheme: Boolean,
  obligation: VatObligation,
  form: Form[NineBoxModel],
  isAgent: Boolean,
  nIProtocolEnabled: Boolean)(implicit messages: Messages, appConfig: AppConfig, user: User[_])

@title = @{
  if(form.errors.nonEmpty) {
    messages("common.error.titlePrefix", messages("submit_form.title"))
  } else {
    messages("submit_form.title")
  }
}

@niProtocolSuffix = @{
  if(nIProtocolEnabled) ".NIProtocol" else ""
}

@boxSixSubmissionSuffix = @{
  if(flatRateScheme) ".boxSixFlatRate" else ".boxSixNoFlatRate"
}

@mainTemplate(
    pageTitle = title,
    appConfig = appConfig,
    user = Some(user)
) {

  @if(!isAgent) {
    @govukBackLink(BackLink(
        href = controllers.routes.HonestyDeclarationController.show(periodKey).url,
        content = Text(messages("common.back"))
    ))
  }

  @if(form.hasErrors) {
    @govukErrorSummary(ErrorSummary(
        errorList = form.errors.map { error =>
        ErrorLink(content = Text(messages(error.message)), href = Some(s"#box"))
    },
    title = Text(messages("error.summary.title"))
    ))
  }

  <div>

    <h1 class="govuk-heading-xl">
      <span class="govuk-caption-xl">@messages("submit_form.heading")</span>
      <span>@{displayDateRange(obligation.start, obligation.end, useShortDayFormat = true)}</span>
      <span class="govuk-hint">@messages("confirm_submission.returnDueDate", displayDate(obligation.due))</span>
    </h1>

    <h2 class="govuk-heading-l">@clientName</h2>
    <h3 class="govuk-heading-s govuk-form-group">@messages("confirm_submission.vatDetails")</h3>

    @formAction(action = controllers.routes.SubmitFormController.submit(periodKey)){

    <dl class="govuk-summary-list">

        <div class="govuk-summary-list__row" id="box-one">
          <dt class="govuk-summary-list__key govuk-hint">
              @messages("confirm_submission.boxOne")
          </dt>
          <dd class="govuk-summary-list__value govuk-hint">
              @messages(s"confirm_submission.boxOneDescription$niProtocolSuffix")
          </dd>
          <dd class="govuk-summary-list__actions govuk-hint">
              @govukInput(Input(
                id = "cost",
                name = "cost",
                classes = "govuk-input--width-5",
                spellcheck = Some(false),
                prefix = Some(PrefixOrSuffix(
                  content = Text("£")
                ))
              ))
          </dd>
        </div>
        <div class="govuk-summary-list__row" id="box-two">
          <dt class="govuk-summary-list__key govuk-hint">
              @messages("confirm_submission.boxTwo")
          </dt>
          <dd class="govuk-summary-list__value govuk-hint">
              @messages(s"confirm_submission.boxTwoDescription$niProtocolSuffix")
          </dd>
          <dd class="govuk-summary-list__actions govuk-hint">
              @govukInput(Input(
                id = "cost",
                name = "cost",
                classes = "govuk-input--width-5",
                spellcheck = Some(false),
                prefix = Some(PrefixOrSuffix(
                    content = Text("£")
                ))
              ))
          </dd>
        </div>
        <div class="govuk-summary-list__row" id="box-three">
            <dt class="govuk-summary-list__key govuk-hint">
                @messages("confirm_submission.boxThree")
            </dt>
            <dd class="govuk-summary-list__value govuk-hint">
                @messages(s"confirm_submission.boxThreeDescription$niProtocolSuffix")
            </dd>
            <dd class="govuk-summary-list__actions govuk-hint">
                @messages("submit_form.calculatedValue")
            </dd>
        </div>
        <div class="govuk-summary-list__row" id="box-four">
            <dt class="govuk-summary-list__key govuk-hint">
                @messages("confirm_submission.boxFour")
            </dt>
            <dd class="govuk-summary-list__value govuk-hint">
                @messages(s"confirm_submission.boxFourDescription$niProtocolSuffix")
            </dd>
            <dd class="govuk-summary-list__actions govuk-hint">
                @govukInput(Input(
                    id = "cost",
                    name = "cost",
                    classes = "govuk-input--width-5",
                    spellcheck = Some(false),
                    prefix = Some(PrefixOrSuffix(
                        content = Text("£")
                    ))
                ))
            </dd>
        </div>
        <div class="govuk-summary-list__row" id="box-five">
            <dt class="govuk-summary-list__key govuk-hint">
                @messages("confirm_submission.boxFive")
            </dt>
            <dd class="govuk-summary-list__value govuk-hint">
                @messages(s"confirm_submission.boxFiveDescription$niProtocolSuffix")
            </dd>
            <dd class="govuk-summary-list__actions govuk-hint">
                @messages("submit_form.calculatedValue")
            </dd>
        </div>

    </dl>
    <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
    <h3 class="govuk-heading-s" id="additionalInfo">@messages("submit_form.additionalInformation")</h3>

    <dl class="govuk-summary-list">

        <div class="govuk-summary-list__row" id="box-six">
            <dt class="govuk-summary-list__key govuk-hint">
                @messages("confirm_submission.boxSix")
            </dt>
            <dd class="govuk-summary-list__value govuk-hint">
                @messages(s"confirm_submission$boxSixSubmissionSuffix")
            </dd>
            <dd class="govuk-summary-list__actions govuk-hint">
                @govukInput(Input(
                    id = "cost",
                    name = "cost",
                    classes = "govuk-input--width-5",
                    spellcheck = Some(false),
                    prefix = Some(PrefixOrSuffix(
                        content = Text("£")
                    ))
                ))
            </dd>
        </div>
        <div class="govuk-summary-list__row" id="box-seven">
            <dt class="govuk-summary-list__key govuk-hint">
                @messages("confirm_submission.boxSeven")
            </dt>
            <dd class="govuk-summary-list__value govuk-hint">
                @messages(s"confirm_submission.boxSevenDescription$niProtocolSuffix")
            </dd>
            <dd class="govuk-summary-list__actions govuk-hint">
                @govukInput(Input(
                    id = "cost",
                    name = "cost",
                    classes = "govuk-input--width-5",
                    spellcheck = Some(false),
                    prefix = Some(PrefixOrSuffix(
                        content = Text("£")
                    ))
                ))
            </dd>
        </div>
        <div class="govuk-summary-list__row" id="box-eight">
            <dt class="govuk-summary-list__key govuk-hint">
                @messages("confirm_submission.boxEight")
            </dt>
            <dd class="govuk-summary-list__value govuk-hint">
                @messages(s"confirm_submission.boxEightDescription$niProtocolSuffix")
            </dd>
            <dd class="govuk-summary-list__actions govuk-hint">
                @govukInput(Input(
                    id = "cost",
                    name = "cost",
                    classes = "govuk-input--width-5",
                    spellcheck = Some(false),
                    prefix = Some(PrefixOrSuffix(
                        content = Text("£")
                    ))
                ))
            </dd>
        </div>
        <div class="govuk-summary-list__row" id="box-nine">
            <dt class="govuk-summary-list__key govuk-hint">
                @messages("confirm_submission.boxNine")
            </dt>
            <dd class="govuk-summary-list__value govuk-hint">
                @messages(s"confirm_submission.boxNineDescription$niProtocolSuffix")
            </dd>
            <dd class="govuk-summary-list__actions govuk-hint">
                @govukInput(Input(
                    id = "cost",
                    name = "cost",
                    classes = "govuk-input--width-5",
                    spellcheck = Some(false),
                    prefix = Some(PrefixOrSuffix(
                        content = Text("£")
                    ))
                ))
            </dd>
        </div>

    </dl>

    <p class="govuk-body" id="next-screen-submit">@messages("submit_form.submitReturn")</p>

    @govukButton(Button(content = Text(messages("common.continue"))))

    }

  </div>
}
